<html>
<head>
	<title>Leaflet Map</title>
	<!-- External Stylesheets -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>
	<style>#map{height:80%;width:100%}#dv2{height:20%;width:100%;top:80%;}</style>
	
	
	<script>
	myGlobalArray = [];
	var map;
	var myMarker = [];
	
	myArray1 = [41.88065818,41.77414081,41.81169772,41.77866106,41.76696103,41.88208743,41.87486564,41.7809464,41.78491783,41.77168117,41.75843896,41.85679041,41.97371228,41.94017587,41.94661988,41.878639,
41.88449753,41.8856033,41.96071926,41.79686537,41.78655735,41.89594231,41.7798438,41.7984293,41.8843504,41.87230354,41.8898681,41.88200469,41.82612741,41.86631355,41.77341186,41.8728988,41.75717702,
41.75561723,41.74874226,41.78019354,41.76200927,41.85148902,41.75116636,41.90842698,41.90737848,41.8565104,41.82417802,41.76679686,41.79052072,41.77162531,41.74246218,41.72016406,41.79639731,
41.70273118,41.76352201,41.7387108,41.73332905,41.84922203,41.76074395,41.77923474,41.74525198,41.75830866,41.86407316,41.78292153,41.89490828,41.88568685,41.88629724,41.74535402,41.84402377,
41.81113396,41.99813061,41.76809684,41.76173329,41.89302675,41.87781186,41.84301696,41.91090083,41.76208913,41.9082371,41.79393591,41.71184357,41.81587521,41.91011672,41.79070461,41.92732184,
41.99596152,41.88993449,41.7213798,41.92527818,41.83458618,41.81472107,41.74089592,41.88063228,41.87851302,41.90528413,41.94998639,41.99458874,41.7119596,41.82034323,41.94333206,41.77107306,
41.76991675,41.65324998,41.78591319,41.79204575,41.72134702,41.94646154,41.88165124,41.73697442,41.93382589,41.84114586,41.7652989,41.99370385,41.8979804,41.77714211,41.88945317,41.91994998,
41.83638523,41.74271022,41.91349864,41.90465676,41.9203601,41.81509317,41.87891776,41.86816541,41.88449753,41.88316482,41.99057177,41.70427604,41.75045785,41.8382197,41.96921161,41.79874193,
41.74771234,41.7248615,41.75776725,41.85442795,41.97284344,41.78272837,41.90727403,41.94525754,41.76418539,41.99419755,41.99973106,41.76575557,41.98427785,41.90178302,41.83994702,41.78624472,
41.82366585,41.89436874,41.69158427,41.8942631,41.77431903,41.90650727,41.7418051,41.76884638,41.78375742,41.94693295,41.93935715,41.93496894,41.93925849,41.79327599,41.88575329,41.74016931,
41.73277179,41.83185793,41.8081478,41.73699363,41.99615508,41.72124785,41.98025918,41.88638227,41.90950808,41.90025005,41.85129667,41.85669507,41.94495301,41.75025215,41.93358238,41.90711883,
41.77270119,41.85981528,41.80758633,41.71790308,41.93994148,41.96119177,41.78765064,41.91857831,41.85730848,41.92920189,41.88728587,41.88591631,41.945916,41.88098896,41.94004203,41.99345733,
41.78653906,41.89232854,41.95193503,41.87156685,41.76971848,41.71793338,41.85393075,42.00229294,41.75273668,41.78669138,41.76474177,41.95101895,41.8774702,41.77596364,41.74792601,41.94782459,41.88893198,
41.77984007,41.74628779];
		myArray2 = [-87.73121214,-87.72630709,-87.67521432,-87.68227253,-87.62015212,-87.71104196,-87.72042737,-87.62199537,-87.61325785,-87.66157579,-87.65394381,-87.70842407,-87.84572084,-87.72562072,
-87.78229355,-87.62769149,-87.6258386,-87.77295776,-87.74783885,-87.65130471,-87.61739759,-87.74686618,-87.70644026,-87.74452144,-87.65698526,-87.71805426,-87.72500701,-87.72894843,-87.66906773,-87.71359232,
-87.67133862,-87.69438824,-87.63841721,-87.64416974,-87.61365127,-87.59916581,-87.57250252,-87.7285127,-87.66467021,-87.69362262,-87.64609233,-87.70538742,-87.6337748,-87.62333203,-87.6223589,-87.70606205,
-87.6498764,-87.65766943,-87.72325128,-87.53473641,-87.69422464,-87.65220252,-87.66056137,-87.69155551,-87.63333531,-87.68520713,-87.55277346,-87.62065842,-87.70681861,-87.60436317,-87.75837196,-87.74951598,
-87.76175071,-87.6037989,-87.62692325,-87.62074077,-87.66581404,-87.66387859,-87.55830998,-87.62675083,-87.65575801,-87.61722727,-87.68601875,-87.69663234,-87.67843742,-87.62568028,-87.64660793,-87.60183257,
-87.67744465,-87.60614149,-87.66581042,-87.79752856,-87.63761923,-87.64978116,-87.65936796,-87.63228541,-87.7054583,-87.64861788,-87.63593549,-87.76642478,-87.73261553,-87.65319658,-87.65752255,-87.61267363,
-87.64175921,-87.70528607,-87.56827866,-87.66395498,-87.60482818,-87.69480165,-87.79713628,-87.65211853,-87.72072354,-87.62620049,-87.545828,-87.78335189,-87.64148388,-87.58365451,-87.79418524,-87.63037668,
-87.64714727,-87.62799483,-87.65164906,-87.66571041,-87.63408818,-87.77410994,-87.70763425,-87.68260517,-87.70425144,-87.72175831,-87.62743954,-87.6258386,-87.6445084,-87.79339873,-87.61979792,-87.58831279,
-87.70485067,-87.7634591,-87.62580711,-87.66579808,-87.62874294,-87.60781822,-87.68570021,-87.67112723,-87.64972028,-87.72279189,-87.74767892,-87.5926442,-87.79647287,-87.70580971,-87.57629243,-87.67101243,
-87.62799506,-87.7146725,-87.70365352,-87.60307202,-87.71018083,-87.67750189,-87.72115283,-87.60579503,-87.76702211,-87.57823003,-87.7298248,-87.68376461,-87.75554478,-87.77685754,-87.65393685,-87.66380409,
-87.77823659,-87.62699624,-87.57820157,-87.60472899,-87.64491566,-87.66496197,-87.54582776,-87.67345707,-87.65996945,-87.71000978,-87.76339888,-87.7551807,-87.62727361,-87.7064588,-87.64885236,-87.64941621,
-87.61813096,-87.64551708,-87.67868029,-87.58506036,-87.62397793,-87.61512779,-87.63749255,-87.65208674,-87.70736456,-87.64863395,-87.63618385,-87.61934007,-87.69876576,-87.75694927,-87.65448252,-87.65307443,
-87.70485404,-87.82762547,-87.65831807,-87.62063552,-87.64052046,-87.79085381,-87.67048835,-87.58427023,-87.63479637,-87.62384107,-87.66807366,-87.59187063,-87.6689433,-87.67981809,-87.71038665,-87.67822288,
-87.61551737,-87.6633736,-87.79972205,-87.71978611,-87.70676293,-87.56516873];
	
	
	
	function myFun(){
	
	
	map = L.map('map',{ center: [41.77, -87.5333], doubleClickZoom: false, zoom: 9});
		

		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>' }).addTo(map);
		
		myGlobalArray.push(map);
		

		
		
	
		
		
		
		}
		
		
		
	
		
		var mA=[];
		var mL=[];
		function startFun(){
		map.on('dblclick', function(e) {
		myLatLon = e.latlng;
		//alert(myLatLon);
		L.marker(myLatLon).addTo(map);
		mA.push(myLatLon);
		if(mA.length>2){mA.splice(0,1);}
		if(mA.length==2){
		mLine = L.polyline(mA,{color:'RGB(100,0,0)'})
		
		mLine.addTo(map);
		mL.push(mLine);
		//alert(mLine.getLatLngs());
		for(i=0;i<mL.length;i++){alert(mL[i].getLatLngs()[1]);}
		
		}
		});
		

		}	
    	
		
		
		
		function startFun2(){
		
		
		map.on('dblclick', function(e) {
		mFinalLine=[];
		//alert("dblClicking");
		
		if(mL.length>=2){
			mFin1 = mL[mL.length-1].getLatLngs()[1];
			//mFin2 is to first line
			mFin2=mL[0].getLatLngs()[0];
			
			mFinalLine.push(mFin1);mFinalLine.push(mFin2);
			myPoly = L.polyline(mFinalLine,{color:'RGB(100,0,0)'})
			myPoly.addTo(map);
			mA=[];
			mL=[];
			alert(mL.length);
			

			}
		else{return;}
		
		
		});
		

		}	
    	
		
		
		
		
		
		
		
		
		
		
		// Add OpenStreetMap tile layer to map element
		
    	// Create variable to hold map element, give initial settings to map
    	// Create point feature for Kendall Square T Station		

		//for(i=0;i<myArray1.length;i++){L.marker([myArray1[i], myArray2[i]]).addTo(map);}
		//var myDataPoint = L.marker([41.6667, -91.5333]).addTo(map);
		//function myFun2(){for(i=0;i<myArray1.length;i++){L.marker([myArray1[i], myArray2[i]]).addTo(map);}}
		//document.getElementById("map").addEventListener("click", addM);
		//myStr="click";
		//document.getElementById("map").addEventListener(myStr, clearM);
		
		//function addM() {myMarker=[];for(i=0;i<myArray1.length;i++){myMarker[i] = L.marker([myArray1[i], myArray2[i]]);myMarker[i].addTo(map);}}
		//function clearM(event) {alert(map);alert(event.getLatLng());alert("bob");}
		//myGlobalArray[0].on('click', function(e) { alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng) });
		
		
		
		
		
	</script>
</head>
<body onload="myFun();startFun();startFun2()">
	<!-- Our web map and content will go here -->
	<div id="map"></div>
	<!-- Add the Leaflet JavaScript library -->
	<div id="div2" onclick="clearM()">Hello Hello</div>
	
	
	
</body>
</html>
